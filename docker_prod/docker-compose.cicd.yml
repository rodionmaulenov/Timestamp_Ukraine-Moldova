version: '3.8'

services:
  web:
    image: web-prod
    build:
      context: ..
      dockerfile: Dockerfile
    volumes:
      - ..:/usr/src/app
      - ../static:/usr/src/app/static
      - ../media:/usr/src/app/media

  celery:
    image: celery-prod
    build:
      context: ..
      dockerfile: Dockerfile
    volumes:
      - ..:/usr/src/app
      - ../static:/usr/src/app/static
      - ../media:/usr/src/app/media

  celery-beat:
    image: celery-beat-prod
    build:
      context: ..
      dockerfile: Dockerfile
    volumes:
      - ..:/usr/src/app
      - ../static:/usr/src/app/static
      - ../media:/usr/src/app/media

  nginx:
    image: nginx-prod
    build:
      context: ../nginx
      dockerfile: ../nginx/Dockerfile
    volumes:
      - ../static:/usr/src/app/static
      - ../media:/usr/src/app/media

  telegram:
    image: tel-prod
    build:
      context: ..
      dockerfile: Dockerfiletelegram
    volumes:
      - ..:/usr/src/app
      - ../static:/usr/src/app/static
      - ../media:/usr/src/app/media